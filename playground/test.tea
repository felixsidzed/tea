using "io";
using "memory";
using "string";

class Test
	private var data: string;

	Test(string data)
		this->data = data;
	end

	~Test()
		io::print("deconstructor called\n");
		memory::free(data);
	end

	public func size() -> int
		return string::len(data);
	end
end

public func main()
	var ptr: string = memory::alloc(4);
	*ptr = 'a';
	*(ptr + 1) = 'b';
	*(ptr + 2) = 'c';
	*(ptr + 3) = '\0';

	var ts: Test = Test(ptr);
	io::printf("length = %d\n", ts.size());

	return 0;
end
